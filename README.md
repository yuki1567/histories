# アプリケーション名
HISTORIES

# アプリケーション概要
本をオンラインで借りられるアプリケーションです

# 本番環境URL
http://52.193.179.72/

## ログイン情報（テスト用）
- Eメール: a@com
- パスワード: 123456

# 利用方法
オンラインで本が借りたい人が新規登録やログインすることによって本を借りられます

# 目指した課題解決
コロナ禍ということもあり本を借りるのに図書館などに行って貸し借りするのではなくオンラインで完結できるできるようにしたいと思いました

洗い出した要件
- ユーザー登録、ログイン機能
- ユーザー一覧機能
- マイページ機能
- ユーザー情報編集機能
- ユーザー削除機能
- 本登録機能
- 本一覧機能
- 本情報編集機能
- 本登録削除機能
- カートに本を登録する機能
- カートの本一覧機能
- カートの本削除機能
- 本を借りる機能
- 借りた本一覧機能
- 借りた本履歴機能
- 本返却確認機能
- 本検索機能
- コメント機能
- 返却日数表示機能

# DEMO

## 本一覧機能
[![Image from Gyazo](https://i.gyazo.com/d847f7d52327e756b2645abd891b6ce5.gif)](https://gyazo.com/d847f7d52327e756b2645abd891b6ce5)

## ユーザー登録機能
[![Image from Gyazo](https://i.gyazo.com/af4aa5fcd52c62c04314a7215e0664e3.gif)](https://gyazo.com/af4aa5fcd52c62c04314a7215e0664e3)

## ユーザーログイン機能
[![Image from Gyazo](https://i.gyazo.com/49d0a6340883cb7c7b22188433ace7cb.gif)](https://gyazo.com/49d0a6340883cb7c7b22188433ace7cb)

## ユーザー一覧機能
[![Image from Gyazo](https://i.gyazo.com/6e977fe567f970135bce838c2e586a97.png)](https://gyazo.com/6e977fe567f970135bce838c2e586a97)

## マイページ機能
[![Image from Gyazo](https://i.gyazo.com/8902ac614d503db9853194b9e4368386.gif)](https://gyazo.com/8902ac614d503db9853194b9e4368386)

## ユーザー情報編集機能
[![Image from Gyazo](https://i.gyazo.com/e58e3d5fd13dd2e1cb3fbe22d4975a41.gif)](https://gyazo.com/e58e3d5fd13dd2e1cb3fbe22d4975a41)

## ユーザー削除機能
[![Image from Gyazo](https://i.gyazo.com/119e9c8a26079cabe0444c9f01ece3d0.gif)](https://gyazo.com/119e9c8a26079cabe0444c9f01ece3d0)

## 本登録機能
[![Image from Gyazo](https://i.gyazo.com/ef45712630919e1a7cdc2163fca52788.gif)](https://gyazo.com/ef45712630919e1a7cdc2163fca52788)

## 本情報詳細機能
[![Image from Gyazo](https://i.gyazo.com/3327abeceac30d101fce93eeb9811486.gif)](https://gyazo.com/3327abeceac30d101fce93eeb9811486)

## 本情報編集機能
[![Image from Gyazo](https://i.gyazo.com/8569d60a35c89441a9bb56aa5612d517.gif)](https://gyazo.com/8569d60a35c89441a9bb56aa5612d517)

## 本登録削除機能
[![Image from Gyazo](https://i.gyazo.com/255ff47428edd7d0d8d9a131612cbb0f.gif)](https://gyazo.com/255ff47428edd7d0d8d9a131612cbb0f)

## カート本登録機能
[![Image from Gyazo](https://i.gyazo.com/771e66070b7f963e7ba81a805b2ca91e.gif)](https://gyazo.com/771e66070b7f963e7ba81a805b2ca91e)

## カートの本一覧機能
[![Image from Gyazo](https://i.gyazo.com/3de1a8262033ef75918e391678a33350.png)](https://gyazo.com/3de1a8262033ef75918e391678a33350)

## カートの本削除機能
[![Image from Gyazo](https://i.gyazo.com/5dc11c3f72303720c590c02b34ccbafb.gif)](https://gyazo.com/5dc11c3f72303720c590c02b34ccbafb)

## 本を借りる機能
[![Image from Gyazo](https://i.gyazo.com/2e1f547f552c83688936f8a548ab8b13.gif)](https://gyazo.com/2e1f547f552c83688936f8a548ab8b13)

## 借りた本一覧機能
[![Image from Gyazo](https://i.gyazo.com/65a49d29ce3bc91d74a09966ba59d71f.gif)](https://gyazo.com/65a49d29ce3bc91d74a09966ba59d71f)

## 借りた本の履歴機能
[![Image from Gyazo](https://i.gyazo.com/8cc08747a8f2f2a6e1d454cd8b7729d6.gif)](https://gyazo.com/8cc08747a8f2f2a6e1d454cd8b7729d6)

## 本返却確認機能
[![Image from Gyazo](https://i.gyazo.com/7dfbdc044f30d75fa63ee712d7f01e6b.gif)](https://gyazo.com/7dfbdc044f30d75fa63ee712d7f01e6b)

## 本検索機能
[![Image from Gyazo](https://i.gyazo.com/298a96d2ce133e82c6857a9fb67d8c29.gif)](https://gyazo.com/298a96d2ce133e82c6857a9fb67d8c29)

## コメント機能
[![Image from Gyazo](https://i.gyazo.com/bcd1d76e14415d201dc55f9e2dcc12ae.gif)](https://gyazo.com/bcd1d76e14415d201dc55f9e2dcc12ae)

## 返却日数表示機能
[![Image from Gyazo](https://i.gyazo.com/964bd2a2488c6638db5e4b16502e79f4.png)](https://gyazo.com/964bd2a2488c6638db5e4b16502e79f4)

# 工夫したポイント
- より多くのユーザーが色々な本を見られるように一度に借りられるのは10冊までにしたり同じ本を2冊かりられないようにしました
- カテゴリーごとの検索機能を導入しました

# 使用技術(開発環境)

## バックエンド
Ruby, Ruby on Rails

## フロントエンド
HTML, CSS, JavaScript

## データベース
MySQL

## インフラ
AWS(EC2)

## Webサーバー（本番環境）
Nginx

## アプリケーションサーバー（本番環境）
Unicorn

## ソース管理
GitHub, GitHubDesktop

## テスト
RSpec

## エディタ
iTerm

# 今後実装したい機能
- Dockerでの環境構築
- ランキング機能
- お気に入り機能

# データベース設計

## users テーブル

| Column             | Type    | Options                     |
| ------------------ | ------- | --------------------------- |
| email              | string  | null: false, unique: true   |
| encrypted_password | string  | null: false                 |
| name               | string  | null: false                 | 
| kana_name          | string  | null: false                 |
| admin              | boolean | null: false, default: false |

### Association

- has_one :cart, dependent: :destroy
- has_many :borrows, dependent: :destroy

## books テーブル

| Column      | Type       | Options                        |
| ----------- | ---------- | ------------------------------ |
| title       | string     | null: false                    |
| author      | string     | null: false                    |
| content     | text       | null: false                    |
| quantity    | integer    | null: false                    |
| category_id | integer    | null: false                    |

### Association

- has_many :cart_boos
- has_many :carts, through: :cart_books
- has_many :borrow_books
- has_many :borrows, through: :borrow_books
- has_many :comments, dependent: :destroy

### borrows テーブル

| Column         | Type       | Options                        |
| -------------- | ---------- | ------------------------------ |
| borrowing_book | boolean    | null: false, default: true     |
| user           | references | null: false, foreign_key: true |

### Association 

- belongs_to :user
- has_many :borrow_books, dependent: :destroy
- has_many :books, through: :borrow_books
- has_one :address

## borrow_books テーブル

| Column | Type       | Options                        |
| ------ | ---------- | ------------------------------ |
| book   | references | null: false, foreign_key: true |
| borrow | references | null: false, foreign_key: true |

### Association

- belongs_to :book
- belongs_to :borrow

## addresses テーブル

| Column         | Type       | Options                        |
| -------------- | ---------- | ------------------------------ |
| postal_code    | string     | null: false                    |
| prefecture_id  | integer    | null: false                    |
| city           | string     | null: false                    |
| street_address | string     | null: false                    |
| detail_address | string     |                                |
| phone_number   | string     | null: false                    |
| borrow         | references | null: false, foreign_key: true |

### Association

- belongs_to :borrow

## carts テーブル

| Column   | Type       | Options                        |
| -------- | ---------- | ------------------------------ |
| quantity | integer    | null: false, default: 0        |
| user     | references | null: false, foreign_key: true |

### Association

- belongs_to :user
- has_many :cart_books, dependent: :destroy
- has_many :books, through: :cart_books

## cart_books テーブル

| Column | Type       | Options                        |
| ------ | ---------- | ------------------------------ |
| cart   | references | null: false, foreign_key: true |
| book   | references | null: false, foreign_key: true |

### Association

- belongs_to :cart
- belongs_to :book

## comments テーブル

| Column | Type       | Options                        |
| ------ | ---------- | ------------------------------ |
| text   | text       |                                |
| book   | references | null: false, foreign_key: true |

### Association

- belongs_to :book

# ローカルでの動作方法

## 動作環境
macOS BigSur 11.6
Ruby 2.6.5

git clone https://github.com/yuki1567/histories

cd histories

bundle install

yarn install 

rails db:create

rails db:migrate

rails s